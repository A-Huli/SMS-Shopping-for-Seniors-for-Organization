{% extends 'base.jinja2' %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jq-3.3.1/dt-1.10.20/datatables.min.css"/>
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/jq-3.3.1/dt-1.10.20/datatables.min.js"></script>
{% endblock head %}

{% block title %}
    <title>All Organisations</title>
{% endblock title %}

{% block content %}
    <div class="uk-card uk-card-body uk-card-default uk-width-3-4 uk-margin-auto">
        <table id="sortableTable" class="display cell-border row-border text-center table-light">
            <thead class="uk-background-muted">
                {% for column in columns %}
                    <th>{{ column }}</th>
                {% endfor %}
            </thead>
            {% for org in organisations %}
                <tr>
                    {% for key, value in org.items() %}
                        {% if key == _('Name') %}
                            <td><a href="{{ url_for('organisations.edit_organisation', org_id=org['ID']) }}">{{ value }}</a></td>
                        {% else %}
                            <td>{{ value }}</td>
                        {% endif %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>
    </div>

    <style>
    .dataTables_length {
        margin-bottom: 1rem;
        white-space: nowrap;
    }

    </style>
    <script>
        $.extend( $.fn.dataTable.defaults, {
            responsive: true,
        } );
        $('#sortableTable').DataTable({
            "order": [[ 0, 'asc' ]]
        });
        $(document).ready(function() {
            let select = document.getElementsByName("sortableTable_length");
            console.log(select);
            select[0].classList.add("uk-width-auto");
            select[0].classList.add("uk-select");
        });
    </script>

{% endblock content %}